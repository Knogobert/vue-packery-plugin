'use strict';Object.defineProperty(exports,'__esModule',{value:!0}),exports.packeryEvents=void 0;var _vue=require('vue'),_vue2=_interopRequireDefault(_vue),_packery=require('packery'),_packery2=_interopRequireDefault(_packery);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var ADD='itemAdded',CHANGE='itemChange',REMOVE='itemRemoved',LAYOUT='layout',packeryPlugin=function(){};exports.default=packeryPlugin;var packeryEvents=exports.packeryEvents=new _vue2.default({});function CustomEvent(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent('CustomEvent');return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent,packeryPlugin.install=function(a){a.directive('packery',{bind:function(d,e,f){var g=null,h=new _packery2.default(d,e.value),i=function(m){d.isSameNode(m)&&a.nextTick(function(){h.reloadItems(),h.layout()})},j=function(m,n){return f.componentInstance?void f.componentInstance.$emit(m,n):void f.elm.dispatchEvent(new CustomEvent(m,n))};h.on('layoutComplete',function(l,m){j('layoutComplete',{event:l,laidOutItems:m})}),h.on('dragItemPositioned',function(l,m){j('dragItemPositioned',{event:l,draggedItem:m})}),h.on('fitComplete',function(l,m){j('fitComplete',{event:l,item:m})});var k=function(m){clearTimeout(g),g=setTimeout(function(){i(m)},1)};packeryEvents.$on(ADD,function(l){k(l)}),packeryEvents.$on(CHANGE,function(l){k(l)}),packeryEvents.$on(REMOVE,function(l){k(l)}),packeryEvents.$on(LAYOUT,function(l){k(l)})},unbind:function(d){var e=setInterval(function(){document.contains(d)||(d.packery.destroy(),d.packery=null,clearTimeout(e))},1e3)}}),a.directive('packeryItem',{inserted:function(d){d.packeryNode=d.parentNode,packeryEvents.$emit(ADD,d.packeryNode)},updated:function(d){packeryEvents.$emit(CHANGE,d.packeryNode)},unbind:function(d){packeryEvents.$emit(REMOVE,d.packeryNode)}})};
